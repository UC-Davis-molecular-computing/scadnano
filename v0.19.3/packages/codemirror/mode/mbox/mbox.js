(function(d){"object"==typeof exports&&"object"==typeof module?d(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],d):d(CodeMirror)})(function(d){function h(b,a){if(b.sol()){a.inSeparator=!1;if(a.inHeader&&b.match(k))return null;a.inHeader=!1;a.header=null;if(b.match(l))return a.inHeaders=!0,a.inSeparator=!0,"atom";var c,e=!1;if((c=b.match(m))||(e=!0,c=b.match(n)))return a.inHeaders=!0,a.inHeader=!0,a.emailPermitted=e,a.header=c[1],"atom";if(a.inHeaders&&
(c=b.match(p)))return a.inHeader=!0,a.emailPermitted=!0,a.header=c[1],"atom";a.inHeaders=!1;b.skipToEnd();return null}if(a.inSeparator){if(b.match(q))return"link";if(b.match(r))return"atom";b.skipToEnd();return"atom"}if(a.inHeader){c="Subject"===a.header?"header":"string";if(a.emailPermitted){if(b.match(t))return c+" link";if(b.match(u))return c}b.skipToEnd();return c}b.skipToEnd();return null}var f="From Sender Reply-To To Cc Bcc Message-ID In-Reply-To References Resent-From Resent-Sender Resent-To Resent-Cc Resent-Bcc Resent-Message-ID Return-Path Received".split(" "),
g=["Date","Subject","Comments","Keywords","Resent-Date"];d.registerHelper("hintWords","mbox",f.concat(g));var k=/^[ \t]/,l=/^From /,n=new RegExp("^("+f.join("|")+"): "),m=new RegExp("^("+g.join("|")+"): "),p=/^[^:]+:/,q=/^[^ ]+@[^ ]+/,r=/^.*?(?=[^ ]+?@[^ ]+)/,t=/^<.*?>/,u=/^.*?(?=<.*>)/;d.defineMode("mbox",function(){return{startState:function(){return{inSeparator:!1,inHeader:!1,emailPermitted:!1,header:null,inHeaders:!1}},token:h,blankLine:function(b){b.inHeaders=b.inSeparator=b.inHeader=!1}}});
d.defineMIME("application/mbox","mbox")});
