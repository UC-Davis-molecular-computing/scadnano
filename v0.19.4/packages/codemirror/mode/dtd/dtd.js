(function(g){"object"==typeof exports&&"object"==typeof module?g(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],g):g(CodeMirror)})(function(g){g.defineMode("dtd",function(m){function e(b,a){d=a;return b}function h(b,a){var c=b.next();if("<"==c&&b.eat("!")){if(b.eatWhile(/[\-]/))return a.tokenize=l,l(b,a);if(b.eatWhile(/[\w]/))return e("keyword","doindent")}else{if("<"==c&&b.eat("?"))return a.tokenize=n("meta","?>"),e("meta",c);if("#"==c&&b.eatWhile(/[\w]/))return e("atom",
"tag");if("|"==c)return e("keyword","separator");if(c.match(/[\(\)\[\]\-\.,\+\?>]/))return e(null,c);if(c.match(/[\[\]]/))return e("rule",c);if('"'==c||"'"==c)return a.tokenize=p(c),a.tokenize(b,a);if(b.eatWhile(/[a-zA-Z\?\+\d]/))return a=b.current(),null!==a.substr(a.length-1,a.length).match(/\?|\+/)&&b.backUp(1),e("tag","tag");if("%"==c||"*"==c)return e("number","number");b.eatWhile(/[\w\\\-_%.{,]/);return e(null,null)}}function l(b,a){for(var c=0,f;null!=(f=b.next());){if(2<=c&&">"==f){a.tokenize=
h;break}c="-"==f?c+1:0}return e("comment","comment")}function p(b){return function(a,c){for(var f=!1,k;null!=(k=a.next());){if(k==b&&!f){c.tokenize=h;break}f=!f&&"\\"==k}return e("string","tag")}}function n(b,a){return function(c,f){for(;!c.eol();){if(c.match(a)){f.tokenize=h;break}c.next()}return b}}var q=m.indentUnit,d;return{startState:function(b){return{tokenize:h,baseIndent:b||0,stack:[]}},token:function(b,a){if(b.eatSpace())return null;var c=a.tokenize(b,a),f=a.stack[a.stack.length-1];"["==
b.current()||"doindent"===d||"["==d?a.stack.push("rule"):"endtag"===d?a.stack[a.stack.length-1]="endtag":"]"==b.current()||"]"==d||">"==d&&"rule"==f?a.stack.pop():"["==d&&a.stack.push("[");return c},indent:function(b,a){var c=b.stack.length;if("]"===a.charAt(0))c--;else if(">"===a.substr(a.length-1,a.length)){if("<"!==a.substr(0,1)&&!("doindent"==d&&1<a.length))if("doindent"==d)c--;else if(!(">"==d&&1<a.length||"tag"==d&&">"!==a))if("tag"==d&&"rule"==b.stack[b.stack.length-1])c--;else if("tag"==d)c++;
else if(">"===a&&"rule"==b.stack[b.stack.length-1]&&">"===d)c--;else if(">"!==a||"rule"!=b.stack[b.stack.length-1])"<"!==a.substr(0,1)&&">"===a.substr(0,1)?--c:">"!==a&&--c;null!=d&&"]"!=d||c--}return b.baseIndent+c*q},electricChars:"]>"}});g.defineMIME("application/xml-dtd","dtd")});
