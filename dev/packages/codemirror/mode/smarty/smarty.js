(function(f){"object"==typeof exports&&"object"==typeof module?f(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],f):f(CodeMirror)})(function(f){f.defineMode("smarty",function(w,p){function d(a,b){q=b;return a}function m(a,b){for(var c=a.string,e=a.pos;;){var g=c.indexOf(l,e);e=g+l.length;var k;(k=-1==g)||(k=g+l.length,null==k&&(k=a.pos),k=!(3===t&&"{"==l&&(k==a.string.length||/\s/.test(a.string.charAt(k)))));if(k)break}if(g==a.pos){a.match(l);
if(a.eat("*"))return c=x("comment","*"+r),b.tokenize=c,c(a,b);b.depth++;b.tokenize=u;q="startTag";return"tag"}-1<g&&(a.string=c.slice(0,g));b=n.token(a,b.base);-1<g&&(a.string=c);return b}function u(a,b){if(a.match(r,!0))return 3===t?(b.depth--,0>=b.depth&&(b.tokenize=m)):b.tokenize=m,d("tag",null);if(a.match(l,!0))return b.depth++,d("tag","startTag");var c=a.next();if("$"==c)return a.eatWhile(h.validIdentifier),d("variable-2","variable");if("|"==c)return d("operator","pipe");if("."==c)return d("operator",
"property");if(h.stringChar.test(c))return b.tokenize=y(c),d("string","string");if(h.operatorChars.test(c))return a.eatWhile(h.operatorChars),d("operator","operator");if("["==c||"]"==c)return d("bracket","bracket");if("("==c||")"==c)return d("bracket","operator");if(/\d/.test(c))return a.eatWhile(/\d/),d("number","number");if("variable"==b.last){if("@"==c)return a.eatWhile(h.validIdentifier),d("property","property");if("|"==c)return a.eatWhile(h.validIdentifier),d("qualifier","modifier")}else{if("pipe"==
b.last)return a.eatWhile(h.validIdentifier),d("qualifier","modifier");if("whitespace"==b.last)return a.eatWhile(h.validIdentifier),d("attribute","modifier")}if("property"==b.last)return a.eatWhile(h.validIdentifier),d("property",null);if(/\s/.test(c))return q="whitespace",null;b="";"/"!=c&&(b+=c);for(var e;e=a.eat(h.validIdentifier);)b+=e;a=0;for(e=v.length;a<e;a++)if(v[a]==b)return d("keyword","keyword");return/\s/.test(c)?null:d("tag","tag")}function y(a){return function(b,c){for(var e=null,g;!b.eol();){g=
b.peek();if(b.next()==a&&"\\"!==e){c.tokenize=u;break}e=g}return"string"}}function x(a,b){return function(c,e){for(;!c.eol();){if(c.match(b)){e.tokenize=m;break}c.next()}return a}}var r=p.rightDelimiter||"}",l=p.leftDelimiter||"{",t=p.version||2,n=f.getMode(w,p.baseMode||"null"),v=["debug","extends","function","include","literal"],h={operatorChars:/[+\-*&%=<>!?]/,validIdentifier:/[a-zA-Z0-9_]/,stringChar:/['"]/},q;return{startState:function(){return{base:f.startState(n),tokenize:m,last:null,depth:0}},
copyState:function(a){return{base:f.copyState(n,a.base),tokenize:a.tokenize,last:a.last,depth:a.depth}},innerMode:function(a){if(a.tokenize==m)return{mode:n,state:a.base}},token:function(a,b){a=b.tokenize(a,b);b.last=q;return a},indent:function(a,b,c){return a.tokenize==m&&n.indent?n.indent(a.base,b,c):f.Pass},blockCommentStart:l+"*",blockCommentEnd:"*"+r}});f.defineMIME("text/x-smarty","smarty")});
